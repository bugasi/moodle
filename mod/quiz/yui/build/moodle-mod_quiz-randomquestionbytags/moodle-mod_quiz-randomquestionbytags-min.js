YUI.add("moodle-mod_quiz-randomquestionbytags",function(e,t){var n={LOADING:"div.questionbytagsloading",RANDOMQUESTIONBYTAGSFORM:"div.randomquestionbytagsformforpopup",PAGEHIDDENINPUT:"input#rform_qpage",RANDOMQUESTIONBYTAGSLINKS:'.menu [data-action="addarandomquestionbytags"]',SEARCHOPTIONS:"select.searchoptions"},r={PAGE:"addonpage",HEADER:"header",FORM:"form"},i=function(){i.superclass.constructor.apply(this,arguments)};e.extend(i,e.Base,{loadingDiv:"",dialogue:null,addonpage:0,create_dialogue:function(){var t={headerContent:"",bodyContent:e.one(n.LOADING),draggable:!0,modal:!0,centered:!0,width:null,visible:!1,postmethod:"form",footerContent:null,extraClasses:["mod_quiz-randomquestionbytags"]};this.dialogue=new M.core.dialogue(t),this.dialogue.bodyNode.delegate("click",this.link_clicked,"a[href]",this),this.dialogue.hide(),this.loadingDiv=this.dialogue.bodyNode.getHTML(),e.later(100,this,function(){this.load_content(window.location.search)})},initializer:function(){if(!e.one(n.LOADING))return;this.create_dialogue(),e.one("body").delegate("click",this.display_dialogue,n.RANDOMQUESTIONBYTAGSLINKS,this)},display_dialogue:function(e){e.preventDefault(),this.dialogue.set("headerContent",e.currentTarget.getData(r.HEADER)),this.dialogue.show()},load_content:function(t){this.dialogue.bodyNode.append(this.loadingDiv),window.history.replaceState&&window.history.replaceState(null,"",M.cfg.wwwroot+"/mod/quiz/edit.php"+t),e.io(M.cfg.wwwroot+"/mod/quiz/randombytags.ajax.php"+t,{method:"GET",on:{success:this.load_done},context:this})},load_done:function(e,t){var n=JSON.parse(t.responseText);if(!n.status||n.status!=="OK"){this.load_failed(e,t);return}this.dialogue.bodyNode.setHTML(n.contents),this.dialogue.bodyNode.one("form").delegate("change",this.options_changed,".searchoptions",this),this.dialogue.bodyNode.one("form").delegate("change",this.options_changed,"#id_includesubcategories",this)},options_changed:function(){this.load_content("?"+e.IO.stringify(this.dialogue.bodyNode.one("form")))}}),M.mod_quiz=M.mod_quiz||{},M.mod_quiz.randomquestionbytags=M.mod_quiz.randomquestionbytags||{},M.mod_quiz.randomquestionbytags.init=function(){return new i}},"@VERSION@",{requires:["base","event","node","io","moodle-core-notification-dialogue"]});
